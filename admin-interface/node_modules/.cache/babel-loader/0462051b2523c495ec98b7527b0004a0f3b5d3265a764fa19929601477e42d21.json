{"ast":null,"code":"import React,{useEffect,useState}from'react';import{InputBox,ImageUpload,FileUpload,Button,DropDown}from'../exports';import{uploadModpack,editModpack}from'../../util/api';import{getFabricLoaders}from'../../util/fabricApi';import{getVanillaVersions}from'../../util/vanillaApi';import'./createmodpack.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CreateModpack=_ref=>{let{close,modpack,isEdit,baseUrl,uploadsUrl}=_ref;const expressServerAdd=uploadsUrl;const[modpackInfo,setModpackInfo]=useState({name:'',version:'',mcVersion:'',fabricVersion:'',description:'',thumbnail:'',modpack:'',size:''});const[fabricLoaders,setFabricLoaders]=useState([]);const[vanillaVersions,setVanillaVersions]=useState([]);const handleInputChange=(fieldName,value)=>{setModpackInfo(prevValues=>({...prevValues,[fieldName]:value}));};const handleCreate=async()=>{try{let res;if(isEdit){res=await editModpack(modpackInfo,baseUrl);}else{res=await uploadModpack(modpackInfo,baseUrl);}console.log('Modpack uploaded successfully: ',res);}catch(error){console.error('Error uploading modpack: ',error);}finally{close(null);}};const fetchOptions=async()=>{try{const vanVersions=await getVanillaVersions();const fabLoaders=await getFabricLoaders();setVanillaVersions(vanVersions);setFabricLoaders(fabLoaders);}catch(error){console.error('Error fetching fabric versions: ',error);}};useEffect(()=>{fetchOptions();if(isEdit){setModpackInfo(modpack);}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"create-modpack-header\",children:isEdit?'Edit Modpack':'Create Modpack'}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-info\",children:[/*#__PURE__*/_jsx(ImageUpload,{onChange:handleInputChange,selectedImg:isEdit?\"\".concat(expressServerAdd).concat(modpack.thumbnail):null,width:169,height:160}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-info-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-info-inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-info-inputs-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"create-modpack-info-inputs-headers\",children:\"Modpack Name\"}),/*#__PURE__*/_jsx(InputBox,{width:200,height:20,fontSize:\"16px\",placeHolder:\"Enter modpack name\",value:modpackInfo.name,onChange:value=>handleInputChange('name',value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-info-inputs-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"create-modpack-info-inputs-headers\",children:\"Modpack Version\"}),/*#__PURE__*/_jsx(InputBox,{width:200,height:20,fontSize:\"16px\",placeHolder:\"Enter modpack version\",value:modpackInfo.version,onChange:value=>handleInputChange('version',value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-info-inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-info-inputs-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"create-modpack-info-inputs-headers\",children:\"Minecraft Version\"}),/*#__PURE__*/_jsx(DropDown,{width:200,height:20,fontSize:\"16px\",placeHolder:\"Enter Minecraft version\",value:modpackInfo.mcVersion,onChange:value=>handleInputChange('mcVersion',value),options:vanillaVersions})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-info-inputs-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"create-modpack-info-inputs-headers\",children:\"Fabric Version\"}),/*#__PURE__*/_jsx(DropDown,{width:200,height:20,fontSize:\"16px\",placeHolder:\"Enter Fabric version\",value:modpackInfo.fabricVersion,onChange:value=>handleInputChange('fabricVersion',value),options:fabricLoaders})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-description\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"create-modpack-description-header\",children:\"Description\"}),/*#__PURE__*/_jsx(InputBox,{type:\"textarea\",width:\"100%\",height:140,fontSize:\"16px\",placeHolder:\"Enter modpack description\",value:modpackInfo.description,onChange:value=>handleInputChange('description',value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-file-upload\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"create-modpack-file-upload-header\",children:\"Modpack Zip File\"}),/*#__PURE__*/_jsx(FileUpload,{onChange:handleInputChange,modpack:modpack})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-modpack-buttons\",children:[/*#__PURE__*/_jsx(Button,{width:90,height:27,text:\"Cancel\",fontSize:\"14px\",type:\"cancel\",onClick:()=>close(null)}),/*#__PURE__*/_jsx(Button,{width:90,height:27,text:isEdit?'Save':'Create',fontSize:\"14px\",type:\"confirm\",onClick:handleCreate})]})]});};export default CreateModpack;","map":{"version":3,"names":["React","useEffect","useState","InputBox","ImageUpload","FileUpload","Button","DropDown","uploadModpack","editModpack","getFabricLoaders","getVanillaVersions","jsx","_jsx","jsxs","_jsxs","CreateModpack","_ref","close","modpack","isEdit","baseUrl","uploadsUrl","expressServerAdd","modpackInfo","setModpackInfo","name","version","mcVersion","fabricVersion","description","thumbnail","size","fabricLoaders","setFabricLoaders","vanillaVersions","setVanillaVersions","handleInputChange","fieldName","value","prevValues","handleCreate","res","console","log","error","fetchOptions","vanVersions","fabLoaders","className","children","onChange","selectedImg","concat","width","height","fontSize","placeHolder","options","type","text","onClick"],"sources":["C:/Users/crazy/Desktop/Feb21/custom-modpacks/admin-interface/src/components/CreateModpack/CreateModpack.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { InputBox, ImageUpload, FileUpload, Button, DropDown} from '../exports';\r\nimport { uploadModpack, editModpack } from '../../util/api';\r\nimport { getFabricLoaders } from '../../util/fabricApi';\r\nimport { getVanillaVersions } from '../../util/vanillaApi';\r\nimport './createmodpack.css';\r\n\r\n\r\nconst CreateModpack = ({ close, modpack, isEdit, baseUrl, uploadsUrl }) => {\r\n  const expressServerAdd = uploadsUrl;\r\n\r\n  const [modpackInfo, setModpackInfo] = useState({\r\n    name: '',\r\n    version: '',\r\n    mcVersion: '',\r\n    fabricVersion: '',\r\n    description: '',\r\n    thumbnail: '',\r\n    modpack: '',\r\n    size: '',\r\n  });\r\n  const [fabricLoaders, setFabricLoaders] = useState([]);\r\n  const [vanillaVersions, setVanillaVersions] = useState([]);\r\n\r\n  const handleInputChange = (fieldName, value) => {\r\n    setModpackInfo((prevValues) => ({\r\n      ...prevValues,\r\n      [fieldName]: value,\r\n    }));\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    try {\r\n      let res;\r\n      if (isEdit) {\r\n        res = await editModpack(modpackInfo, baseUrl);\r\n      } else {\r\n        res = await uploadModpack(modpackInfo, baseUrl);\r\n      }\r\n      console.log('Modpack uploaded successfully: ', res);\r\n    } catch (error) {\r\n      console.error('Error uploading modpack: ', error);\r\n    } finally {\r\n      close(null);\r\n    }\r\n  };\r\n\r\n  const fetchOptions = async () => {\r\n    try {\r\n      const vanVersions = await getVanillaVersions();\r\n      const fabLoaders = await getFabricLoaders();\r\n\r\n      setVanillaVersions(vanVersions);\r\n      setFabricLoaders(fabLoaders);\r\n    } catch (error) {\r\n      console.error('Error fetching fabric versions: ', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOptions();\r\n\r\n    if (isEdit) {\r\n      setModpackInfo(modpack);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className='create-modpack'>\r\n      <p className='create-modpack-header'>{isEdit ? 'Edit Modpack' : 'Create Modpack'}</p>\r\n      <div className='create-modpack-info'>\r\n        <ImageUpload\r\n          onChange={handleInputChange}\r\n          selectedImg={isEdit ? `${expressServerAdd}${modpack.thumbnail}` : null}\r\n          width={169}\r\n          height={160}\r\n        />\r\n        <div className='create-modpack-info-container'>\r\n          <div className='create-modpack-info-inputs'>\r\n            <div className='create-modpack-info-inputs-container'>\r\n              <p className='create-modpack-info-inputs-headers'>Modpack Name</p>\r\n              <InputBox\r\n                width={200}\r\n                height={20}\r\n                fontSize='16px'\r\n                placeHolder='Enter modpack name'\r\n                value={modpackInfo.name}\r\n                onChange={(value) => handleInputChange('name', value)}\r\n              />\r\n            </div>\r\n            <div className='create-modpack-info-inputs-container'>\r\n              <p className='create-modpack-info-inputs-headers'>Modpack Version</p>\r\n              <InputBox\r\n                width={200}\r\n                height={20}\r\n                fontSize='16px'\r\n                placeHolder='Enter modpack version'\r\n                value={modpackInfo.version}\r\n                onChange={(value) => handleInputChange('version', value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className='create-modpack-info-inputs'>\r\n            <div className='create-modpack-info-inputs-container'>\r\n              <p className='create-modpack-info-inputs-headers'>Minecraft Version</p>\r\n              <DropDown\r\n                width={200}\r\n                height={20}\r\n                fontSize='16px'\r\n                placeHolder='Enter Minecraft version'\r\n                value={modpackInfo.mcVersion}\r\n                onChange={(value) => handleInputChange('mcVersion', value)}\r\n                options={vanillaVersions}\r\n              />\r\n            </div>\r\n            <div className='create-modpack-info-inputs-container'>\r\n              <p className='create-modpack-info-inputs-headers'>Fabric Version</p>\r\n              <DropDown\r\n                width={200}\r\n                height={20}\r\n                fontSize='16px'\r\n                placeHolder='Enter Fabric version'\r\n                value={modpackInfo.fabricVersion}\r\n                onChange={(value) => handleInputChange('fabricVersion', value)}\r\n                options={fabricLoaders}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className='create-modpack-description'>\r\n        <p className='create-modpack-description-header'>Description</p>\r\n        <InputBox\r\n          type='textarea'\r\n          width={\"100%\"}\r\n          height={140}\r\n          fontSize='16px'\r\n          placeHolder='Enter modpack description'\r\n          value={modpackInfo.description}\r\n          onChange={(value) => handleInputChange('description', value)}\r\n        />\r\n      </div>\r\n      <div className='create-modpack-file-upload'>\r\n        <p className='create-modpack-file-upload-header'>Modpack Zip File</p>\r\n        <FileUpload onChange={handleInputChange} modpack={modpack} />\r\n      </div>\r\n      <div className='create-modpack-buttons'>\r\n        <Button width={90} height={27} text='Cancel' fontSize='14px' type='cancel' onClick={() => close(null)} />\r\n        <Button width={90} height={27} text={isEdit ? 'Save' : 'Create'} fontSize='14px' type='confirm' onClick={handleCreate} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateModpack;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}