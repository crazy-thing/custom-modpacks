{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{cloud}from'../../assets/exports';import{UploadedFile}from'../exports';import'./fileupload.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const FileUpload=_ref=>{let{onChange,modpack}=_ref;const[isDragging,setIsDragging]=useState(false);const[uploadedModpack,setUploadedModpack]=useState({name:'',version:'',mcVersion:'',fabricVersion:'',description:'',thumbnail:'',modpack:'',size:''});const[uploadProgress,setUploadProgress]=useState(0);const fileInputRef=useRef(null);const handleDragEnter=()=>{setIsDragging(true);};const handleDragLeave=()=>{setIsDragging(false);};const handleDragOver=e=>{e.preventDefault();};const handleModpack=modpack=>{if(!modpack.name.toLowerCase().endsWith('.zip')){console.error('Invalid file type. Please upload a ZIP file.');return;}setUploadedModpack({modpack:modpack.name,size:modpack.size});onChange('modpack',modpack);onChange('size',modpack.size);const reader=new FileReader();reader.onprogress=event=>{if(event.lengthComputable){const progress=event.loaded/event.total*100;setUploadProgress(progress);}};reader.onloadend=()=>{console.log('Reading finished');};reader.readAsDataURL(modpack);};const handleDrop=event=>{event.preventDefault();setIsDragging(false);const files=event.dataTransfer.files;handleModpack(files[0]);};const handleFileInputChange=event=>{const files=event.target.files;handleModpack(files[0]);};const handleClick=()=>{fileInputRef.current.click();};const removeModpack=()=>{setUploadProgress(0);setUploadedModpack({name:'',version:'',mcVersion:'',fabricVersion:'',description:'',thumbnail:'',modpack:'',size:''});onChange('modpack','');onChange('size','');};useEffect(()=>{if(modpack){setUploadedModpack(modpack);setUploadProgress(100);}},[modpack]);return/*#__PURE__*/_jsx(_Fragment,{children:uploadProgress>0?/*#__PURE__*/_jsx(UploadedFile,{uploadedModpack:uploadedModpack,removeModpack:removeModpack,progress:uploadProgress}):/*#__PURE__*/_jsxs(\"div\",{className:\"file-upload \".concat(isDragging?'dragging':''),onDragEnter:handleDragEnter,onDragLeave:handleDragLeave,onDragOver:handleDragOver,onDrop:handleDrop,onClick:handleClick,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-upload-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:cloud,alt:\"Cloud upload icon\",width:28,height:28}),/*#__PURE__*/_jsx(\"p\",{className:\"file-upload-content-text\",children:\"Drop files here or click to upload\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".zip\",ref:fileInputRef,style:{display:'none'},onChange:handleFileInputChange})]})});};export default FileUpload;","map":{"version":3,"names":["React","useState","useRef","useEffect","cloud","UploadedFile","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FileUpload","_ref","onChange","modpack","isDragging","setIsDragging","uploadedModpack","setUploadedModpack","name","version","mcVersion","fabricVersion","description","thumbnail","size","uploadProgress","setUploadProgress","fileInputRef","handleDragEnter","handleDragLeave","handleDragOver","e","preventDefault","handleModpack","toLowerCase","endsWith","console","error","reader","FileReader","onprogress","event","lengthComputable","progress","loaded","total","onloadend","log","readAsDataURL","handleDrop","files","dataTransfer","handleFileInputChange","target","handleClick","current","click","removeModpack","children","className","concat","onDragEnter","onDragLeave","onDragOver","onDrop","onClick","src","alt","width","height","type","accept","ref","style","display"],"sources":["C:/Users/crazy/Documents/custom-modpacks/admin-interface/src/components/FileUpload/FileUpload.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { cloud } from '../../assets/exports';\r\nimport { UploadedFile } from '../exports';\r\nimport './fileupload.css';\r\n\r\n\r\nconst FileUpload = ({ onChange, modpack }) => {\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [uploadedModpack, setUploadedModpack] = useState({\r\n        name: '',\r\n        version: '',\r\n        mcVersion: '',\r\n        fabricVersion: '',\r\n        description: '',\r\n        thumbnail: '',\r\n        modpack: '',\r\n        size: '',\r\n    });\r\n    const [uploadProgress, setUploadProgress] = useState(0);\r\n    const fileInputRef = useRef(null);\r\n\r\n    const handleDragEnter = () => {\r\n        setIsDragging(true);\r\n    };\r\n\r\n    const handleDragLeave = () => {\r\n        setIsDragging(false);\r\n    };\r\n\r\n    const handleDragOver = (e) => {\r\n        e.preventDefault();\r\n    };\r\n\r\n    const handleModpack = (modpack) => {\r\n        if (!modpack.name.toLowerCase().endsWith('.zip')) {\r\n            console.error('Invalid file type. Please upload a ZIP file.');\r\n            return;\r\n        }\r\n        setUploadedModpack({\r\n            modpack: modpack.name,\r\n            size: modpack.size,\r\n        });\r\n        onChange('modpack', modpack);\r\n        onChange('size', modpack.size);\r\n        const reader = new FileReader();\r\n        reader.onprogress = (event) => {\r\n            if (event.lengthComputable) {\r\n                const progress = (event.loaded / event.total) * 100;\r\n                setUploadProgress(progress);\r\n            }\r\n        };\r\n        reader.onloadend = () => {\r\n            console.log('Reading finished');\r\n        };\r\n        reader.readAsDataURL(modpack);\r\n    };\r\n\r\n    const handleDrop = (event) => {\r\n        event.preventDefault();\r\n        setIsDragging(false);\r\n        const files = event.dataTransfer.files;\r\n        handleModpack(files[0]);\r\n    };\r\n\r\n    const handleFileInputChange = (event) => {\r\n        const files = event.target.files;\r\n        handleModpack(files[0]);\r\n    };\r\n\r\n    const handleClick = () => {\r\n        fileInputRef.current.click();\r\n    };\r\n\r\n    const removeModpack = () => {\r\n        setUploadProgress(0);\r\n        setUploadedModpack({\r\n            name: '',\r\n            version: '',\r\n            mcVersion: '',\r\n            fabricVersion: '',\r\n            description: '',\r\n            thumbnail: '',\r\n            modpack: '',\r\n            size: '',\r\n        });\r\n        onChange('modpack', '');\r\n        onChange('size', '');\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (modpack) {\r\n            setUploadedModpack(modpack);\r\n            setUploadProgress(100);\r\n        }\r\n    }, [modpack]);\r\n\r\n    return (\r\n        <>\r\n            {uploadProgress > 0 ? (\r\n                <UploadedFile uploadedModpack={uploadedModpack} removeModpack={removeModpack} progress={uploadProgress} />\r\n            ) : (\r\n                <div\r\n                    className={`file-upload ${isDragging ? 'dragging' : ''}`}\r\n                    onDragEnter={handleDragEnter}\r\n                    onDragLeave={handleDragLeave}\r\n                    onDragOver={handleDragOver}\r\n                    onDrop={handleDrop}\r\n                    onClick={handleClick}\r\n                >\r\n                    <div className='file-upload-content'>\r\n                        <img src={cloud} alt='Cloud upload icon' width={28} height={28} />\r\n                        <p className='file-upload-content-text'>Drop files here or click to upload</p>\r\n                    </div>\r\n                    <input\r\n                        type='file'\r\n                        accept='.zip'\r\n                        ref={fileInputRef}\r\n                        style={{ display: 'none' }}\r\n                        onChange={handleFileInputChange}\r\n                    />\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default FileUpload;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}