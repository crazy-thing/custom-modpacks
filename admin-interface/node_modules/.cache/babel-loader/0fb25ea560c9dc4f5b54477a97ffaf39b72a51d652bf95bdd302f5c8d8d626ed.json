{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{cloud}from'../../assets/exports';import{UploadedFile}from'../exports';import'./fileupload.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const FileUpload=_ref=>{let{onChange,version,isEdit,isEditVersion}=_ref;const[isDragging,setIsDragging]=useState(false);const[uploadedVersion,setUploadedVersion]=useState({zip:'',size:''});const[uploadProgress,setUploadProgress]=useState(0);const fileInputRef=useRef(null);const handleDragEnter=()=>{setIsDragging(true);};const handleDragLeave=()=>{setIsDragging(false);};const handleDragOver=e=>{e.preventDefault();};const handleVersion=newVersion=>{if(!newVersion.name.toLowerCase().endsWith('.zip')){console.error('Invalid file type. Please upload a ZIP file.');return;}setUploadedVersion({zip:newVersion.name,size:newVersion.size});console.log(version);onChange('zipFile',newVersion);onChange('zip',newVersion.name);onChange('size',newVersion.size);const reader=new FileReader();reader.onprogress=event=>{if(event.lengthComputable){const progress=event.loaded/event.total*100;setUploadProgress(progress);}};reader.onloadend=()=>{console.log('Reading finished');};reader.readAsDataURL(newVersion);};const handleDrop=event=>{event.preventDefault();setIsDragging(false);const files=event.dataTransfer.files;handleVersion(files[0]);};const handleFileInputChange=event=>{const files=event.target.files;handleVersion(files[0]);};const handleClick=()=>{fileInputRef.current.click();};const removeVersion=()=>{checkForEdit();setUploadProgress(0);setUploadedVersion({zip:'',size:''});onChange('zip','');onChange('size','');};const checkForEdit=()=>{if(isEditVersion&&version.zip!==''){setUploadedVersion({zip:version.zip,size:version.size});setUploadProgress(100);}else{setUploadProgress(0);}};useEffect(()=>{checkForEdit();},[version]);return/*#__PURE__*/_jsx(_Fragment,{children:uploadProgress>0?/*#__PURE__*/_jsx(UploadedFile,{uploadedVersion:uploadedVersion,removeVersion:removeVersion,progress:uploadProgress,isEdit:isEdit}):/*#__PURE__*/_jsxs(\"div\",{className:\"file-upload \".concat(isDragging?'dragging':''),onDragEnter:handleDragEnter,onDragLeave:handleDragLeave,onDragOver:handleDragOver,onDrop:handleDrop,onClick:handleClick,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"file-upload-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:cloud,alt:\"Cloud upload icon\",width:28,height:28}),/*#__PURE__*/_jsx(\"p\",{className:\"file-upload-content-text\",children:\"Drop files here or click to upload\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".zip\",ref:fileInputRef,style:{display:'none'},onChange:handleFileInputChange})]})});};export default FileUpload;","map":{"version":3,"names":["React","useState","useRef","useEffect","cloud","UploadedFile","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FileUpload","_ref","onChange","version","isEdit","isEditVersion","isDragging","setIsDragging","uploadedVersion","setUploadedVersion","zip","size","uploadProgress","setUploadProgress","fileInputRef","handleDragEnter","handleDragLeave","handleDragOver","e","preventDefault","handleVersion","newVersion","name","toLowerCase","endsWith","console","error","log","reader","FileReader","onprogress","event","lengthComputable","progress","loaded","total","onloadend","readAsDataURL","handleDrop","files","dataTransfer","handleFileInputChange","target","handleClick","current","click","removeVersion","checkForEdit","children","className","concat","onDragEnter","onDragLeave","onDragOver","onDrop","onClick","src","alt","width","height","type","accept","ref","style","display"],"sources":["C:/Users/crazy/Documents/custom-modpacks/admin-interface/src/components/FileUpload/FileUpload.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { cloud } from '../../assets/exports';\r\nimport { UploadedFile } from '../exports';\r\nimport './fileupload.css';\r\n\r\n\r\nconst FileUpload = ({ onChange, version, isEdit, isEditVersion }) => {\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [uploadedVersion, setUploadedVersion] = useState({\r\n        zip: '',\r\n        size: '',\r\n    });\r\n    const [uploadProgress, setUploadProgress] = useState(0);\r\n    const fileInputRef = useRef(null);\r\n\r\n    const handleDragEnter = () => {\r\n        setIsDragging(true);\r\n    };\r\n\r\n    const handleDragLeave = () => {\r\n        setIsDragging(false);\r\n    };\r\n\r\n    const handleDragOver = (e) => {\r\n        e.preventDefault();\r\n    };\r\n\r\n    const handleVersion = (newVersion) => {\r\n        if (!newVersion.name.toLowerCase().endsWith('.zip')) {\r\n            console.error('Invalid file type. Please upload a ZIP file.');\r\n            return;\r\n        }\r\n        setUploadedVersion({\r\n            zip: newVersion.name,\r\n            size: newVersion.size,\r\n        });\r\n        console.log(version);\r\n        onChange('zipFile', newVersion);\r\n        onChange('zip', newVersion.name);\r\n        onChange('size', newVersion.size);\r\n        const reader = new FileReader();\r\n        reader.onprogress = (event) => {\r\n            if (event.lengthComputable) {\r\n                const progress = (event.loaded / event.total) * 100;\r\n                setUploadProgress(progress);\r\n            }\r\n        };\r\n        reader.onloadend = () => {\r\n            console.log('Reading finished');\r\n        };\r\n        reader.readAsDataURL(newVersion);\r\n    };\r\n\r\n    const handleDrop = (event) => {\r\n        event.preventDefault();\r\n        setIsDragging(false);\r\n        const files = event.dataTransfer.files;\r\n        handleVersion(files[0]);\r\n    };\r\n\r\n    const handleFileInputChange = (event) => {\r\n        const files = event.target.files;\r\n        handleVersion(files[0]);\r\n    };\r\n\r\n    const handleClick = () => {\r\n        fileInputRef.current.click();\r\n    };\r\n\r\n    const removeVersion = () => {\r\n        checkForEdit();\r\n        setUploadProgress(0);\r\n        setUploadedVersion({\r\n            zip: '',\r\n            size: '',\r\n        });\r\n        onChange('zip', '');\r\n        onChange('size', '');\r\n    };\r\n\r\n    const checkForEdit = () => {\r\n        if (isEditVersion && version.zip !== '') {\r\n            setUploadedVersion({\r\n                zip: version.zip,\r\n                size: version.size,\r\n            });\r\n            setUploadProgress(100);\r\n        }\r\n        else {\r\n            setUploadProgress(0);\r\n        }       \r\n    }\r\n\r\n    useEffect(() => {\r\n        checkForEdit();\r\n    }, [version]);\r\n\r\n\r\n    return (\r\n        <>\r\n            {uploadProgress > 0 ? (\r\n                <UploadedFile uploadedVersion={uploadedVersion} removeVersion={removeVersion} progress={uploadProgress} isEdit={isEdit} />\r\n            ) : (\r\n                <div\r\n                    className={`file-upload ${isDragging ? 'dragging' : ''}`}\r\n                    onDragEnter={handleDragEnter}\r\n                    onDragLeave={handleDragLeave}\r\n                    onDragOver={handleDragOver}\r\n                    onDrop={handleDrop}\r\n                    onClick={handleClick}\r\n                >\r\n                    <div className='file-upload-content'>\r\n                        <img src={cloud} alt='Cloud upload icon' width={28} height={28} />\r\n                        <p className='file-upload-content-text'>Drop files here or click to upload</p>\r\n                    </div>\r\n                    <input\r\n                        type='file'\r\n                        accept='.zip'\r\n                        ref={fileInputRef}\r\n                        style={{ display: 'none' }}\r\n                        onChange={handleFileInputChange}\r\n                    />\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default FileUpload;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}